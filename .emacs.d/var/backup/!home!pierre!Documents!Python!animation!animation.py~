import sys
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation



if (len(sys.argv)==4):
    file_name=str(sys.argv[1])
    print_step=int(sys.argv[2])
    max_step=int(sys.argv[3])

    
path="Files/"+file_name
frames=int((max_step/print_step)+1)

dt = 1

xmin = 0
xmax = 1
ymin = -0.5
ymax = 0.5
nbx = 100

fig = plt.figure() # initialise la figure
line, = plt.plot([],[]) 
plt.xlim(xmin, xmax)
plt.ylim(ymin,ymax)

# fonction à définir quand blit=True
# crée l'arrière de l'animation qui sera présent sur chaque image
def init():
    line.set_data([],[])
    return line,

def animate(i):
    current_file_name=path+str(i*print_step)+".dat" 
    file=np.loadtxt(current_file_name)
    x = file[:,0]
    y = file[:,1]
    t = i * dt
    line.set_data(x, y)
    return line,
 
ani = animation.FuncAnimation(fig, animate, init_func=init, frames=frames, blit=True, interval=20, repeat=True)

ani.save('test.gif',dpi=20,writer='moi')

plt.show()
















    
# path="Files/"+file_name
# i=0

# while i<max_step:
#      current_file_name=path+str(i)+".dat"
     
#      file=np.loadtxt(current_file_name)
#      grapĥ=plt.plot(file[:,0],file[:,1],label=current_file_name,color='blue')
#      plt.xlabel("x")
#      plt.ylabel("pressure")
#      plt.legend()
#      plt.pause(0.01)
#      i=i+print_step

# plt.show()
